{
  "permissions": {
    "allow": [
      "WebSearch",
      "WebFetch(domain:github.com)",
      "Bash(claude mcp list)",
      "Bash(claude mcp add context7 -- npx -y @upstash/context7-mcp)",
      "Bash(claude mcp call context7 search_docs '{\"\"query\"\": \"\"React 19 useActionState hook\"\", \"\"limit\"\": 2}')",
      "Bash(claude mcp list:*)",
      "Bash(uvx:*)",
      "Bash(ls:*)",
      "Bash(grep:*)",
      "Bash(RELACE_API_KEY=\"rlc-7fznAhiS2ueKuzxx_YZHRWmL56HFMNnrcC3QTA\" uvx relace-mcp-server:*)",
      "Bash(cat:*)",
      "Bash(claude mcp add:*)",
      "Bash(claude mcp:*)",
      "Bash(jq:*)",
      "mcp__relace__relace_search",
      "Skill(collaborating-with-codex)",
      "Skill(collaborating-with-gemini)",
      "Bash(python scripts/gemini_bridge.py:*)",
      "Bash(python scripts/codex_bridge.py:*)",
      "Bash(python:*)",
      "Bash(npm run build:*)",
      "Bash(npm install:*)",
      "Bash(npx tsc:*)",
      "Bash(du:*)",
      "Bash(npm i:*)",
      "Bash(pnpm --version:*)",
      "Bash(pnpm config set:*)",
      "Bash(pnpm config:*)",
      "Bash(pnpm import:*)",
      "Bash(pnpm install:*)",
      "Bash(pnpm run build:*)",
      "Bash(pnpm run dev:*)",
      "Bash(curl:*)",
      "Bash(pkill:*)",
      "Bash(npx next dev -p 3000)",
      "Bash(PGPASSWORD='th1dITMTbjpOdIs6HNhE8F7xZ6cfTwuMrg4nmXbJ9aIAc7YyHwPDpWu2UDKBERPm' psql:*)",
      "Bash(node -e \"\nconst { Pool } = require\\(''pg''\\);\nconst pool = new Pool\\({ connectionString: ''postgres://postgres:th1dITMTbjpOdIs6HNhE8F7xZ6cfTwuMrg4nmXbJ9aIAc7YyHwPDpWu2UDKBERPm@37.120.170.174:5435/postgres'' }\\);\n\\(async \\(\\) => {\n  const res = await pool.query\\(''SELECT id, username, user_id, created_at FROM users ORDER BY created_at DESC LIMIT 20''\\);\n  console.log\\(JSON.stringify\\(res.rows, null, 2\\)\\);\n  await pool.end\\(\\);\n}\\)\\(\\);\n\")",
      "Bash(node -e \"\nconst { Pool } = require\\(''pg''\\);\nconst pool = new Pool\\({ connectionString: ''postgres://postgres:th1dITMTbjpOdIs6HNhE8F7xZ6cfTwuMrg4nmXbJ9aIAc7YyHwPDpWu2UDKBERPm@37.120.170.174:5435/postgres'' }\\);\n\\(async \\(\\) => {\n  const res = await pool.query\\(\"\"SELECT id, username, user_id, created_at FROM users WHERE user_id = ''user_9335bcf86fc2''\"\"\\);\n  console.log\\(''Users with user_id user_9335bcf86fc2:'', JSON.stringify\\(res.rows, null, 2\\)\\);\n  \n  const all = await pool.query\\(''SELECT id, username, user_id, created_at FROM users''\\);\n  console.log\\(''All users:'', JSON.stringify\\(all.rows, null, 2\\)\\);\n  await pool.end\\(\\);\n}\\)\\(\\);\n\")",
      "Bash(node -e \"\nconst { Pool } = require\\(''pg''\\);\nconst pool = new Pool\\({ connectionString: ''postgres://postgres:th1dITMTbjpOdIs6HNhE8F7xZ6cfTwuMrg4nmXbJ9aIAc7YyHwPDpWu2UDKBERPm@37.120.170.174:5435/postgres'' }\\);\n\\(async \\(\\) => {\n  // Check user_settings table for legacy users\n  const settings = await pool.query\\(''SELECT user_id, password_hash IS NOT NULL as has_password FROM user_settings''\\);\n  console.log\\(''user_settings table:'', JSON.stringify\\(settings.rows, null, 2\\)\\);\n  \n  // Check if legacy userId for ''3180'' exists\n  const legacyUserId = ''user_9335bcf86fc2'';  // This is wrong - need to recalculate\n  \n  // Actually calculate the correct legacy userId\n  function generateLegacyUserId\\(username\\) {\n    let hash = 0;\n    for \\(let i = 0; i < username.length; i++\\) {\n      const char = username.charCodeAt\\(i\\);\n      hash = \\(hash << 5\\) - hash + char;\n      hash = hash & hash;\n    }\n    return ''user_'' + Math.abs\\(hash\\).toString\\(16\\);\n  }\n  \n  const correctLegacyId = generateLegacyUserId\\(''3180''\\);\n  console.log\\(''Legacy userId for 3180:'', correctLegacyId\\);\n  \n  const legacyCheck = await pool.query\\(''SELECT * FROM user_settings WHERE user_id = $1'', [correctLegacyId]\\);\n  console.log\\(''Legacy user_settings for 3180:'', JSON.stringify\\(legacyCheck.rows, null, 2\\)\\);\n  \n  await pool.end\\(\\);\n}\\)\\(\\);\n\")",
      "Bash(lsof:*)",
      "Bash(xargs kill:*)",
      "Bash(node -e \"\nconst { Pool } = require\\(''pg''\\);\nconst pool = new Pool\\({ connectionString: ''postgres://postgres:th1dITMTbjpOdIs6HNhE8F7xZ6cfTwuMrg4nmXbJ9aIAc7YyHwPDpWu2UDKBERPm@37.120.170.174:5435/postgres'' }\\);\n\\(async \\(\\) => {\n  const res = await pool.query\\(''SELECT id, name, type, minio_url FROM files WHERE user_id = $1 LIMIT 3'', [''user_17edd6'']\\);\n  console.log\\(JSON.stringify\\(res.rows, null, 2\\)\\);\n  await pool.end\\(\\);\n}\\)\\(\\);\n\")",
      "Bash(node -e \"\nconst { Pool } = require\\(''pg''\\);\nconst pool = new Pool\\({ connectionString: ''postgres://postgres:th1dITMTbjpOdIs6HNhE8F7xZ6cfTwuMrg4nmXbJ9aIAc7YyHwPDpWu2UDKBERPm@37.120.170.174:5435/postgres'' }\\);\n\\(async \\(\\) => {\n  const res = await pool.query\\(\"\"SELECT id, name, type, minio_url FROM files WHERE user_id = ''user_17edd6'' AND type LIKE ''image/%'' LIMIT 3\"\"\\);\n  console.log\\(''Images:'', JSON.stringify\\(res.rows, null, 2\\)\\);\n  \n  // Try to test access to one file\n  if \\(res.rows.length > 0\\) {\n    const url = res.rows[0].minio_url;\n    const response = await fetch\\(url, { method: ''HEAD'' }\\);\n    console.log\\(''Access test:'', response.status, response.statusText\\);\n  }\n  await pool.end\\(\\);\n}\\)\\(\\);\n\")",
      "Bash(rm:*)",
      "Bash(find:*)",
      "Bash(apt-get update:*)",
      "Bash(apt-get install:*)",
      "Bash(timeout 5 bash:*)",
      "Bash(/config/bin/rg:*)",
      "Bash(PATH=\"/config/bin:/config/.local/bin:/usr/local/bin:/usr/bin:/bin\" which rg:*)"
    ]
  }
}
